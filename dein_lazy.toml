[[plugins]]
repo = 'mechatroner/rainbow_csv'
on_ft = 'csv'

[[plugins]]
repo = 'preservim/nerdtree'
hook_add = '''
    nnoremap <silent> <leader>n :NERDTreeToggle<CR>
'''

[[plugins]]
repo = 'nvim-tree/nvim-web-devicons'

[[plugins]]
repo = 'junegunn/fzf'
build = './install --bin'
merged = '0'

[[plugins]]
repo = 'ibhagwan/fzf-lua'
depends = ['fzf', 'nvim-web-devicons']
on_map = {n = [
                   '<leader>f',
                   '<leader>g',
                   '<leader>G',
                   '<leader>b',
                   '<leader>h',
                   '<leader>r',
]}
hook_source = '''
nnoremap <silent> <leader>f <cmd>lua require('fzf-lua').files()<CR>
nnoremap <silent> <leader>g <cmd>lua require('fzf-lua').git_files()<CR>
nnoremap <silent> <leader>G <cmd>lua require('fzf-lua').git_status()<CR>
nnoremap <silent> <leader>b <cmd>lua require('fzf-lua').buffers()<CR>
nnoremap <silent> <leader>h <cmd>lua require('fzf-lua').oldfiles()<CR>
nnoremap <silent> <leader>r <cmd>lua require('fzf-lua').live_grep()<CR>

lua << EOF
require('fzf-lua').setup({
    winopts = {
        height = 0.8,
        width = 0.8,
        row = 0.35,
        col = 0.5,
        border = 'rounded'
    },
    fzf_opts = {
        ['--layout'] = 'reverse'
    },
    files = {
        fd_opts = '--color=never --type f --hidden --follow --exclude .git'
    }
})
EOF
'''

[[plugins]]
repo = 'preservim/vim-indent-guides'
on_ft = ['markdown', 'python', 'fortran', 'c++', 'tex', 'toml']
hook_add = '''
    let g:indent_guides_enable_on_vim_startup = 1
'''
hook_source = '''
    let g:indent_guides_auto_colors = 0
    let g:indent_guides_start_level = 2
    let g:indent_guides_guide_size = 1
    autocmd VimEnter,Colorscheme * :hi IndentGuidesEven guibg=#d7d7d7 ctermbg=254
    autocmd VimEnter,Colorscheme * :hi IndentGuidesOdd  guibg=#e4e4e4 ctermbg=8
'''

[[plugins]]
repo = 'tpope/vim-surround'
on_map = ['ysw', 'cs', 'ds', 'S']
# TODO: モードに対応する

# [[plugins]]
# repo = 'tpope/vim-fugitive'
# on_cmd = 'Git'

[[plugins]]
repo = 'iamcco/markdown-preview.nvim'
on_ft = ['markdown', 'pandoc.markdown', 'rmd']
build = 'sh -c "cd app && npx --yes npm install"'
hook_add = '''
    nnoremap <silent> <leader>md <Plug>MarkdownPreview
'''


#_____________________________________________________________ Start Copilot
[[plugins]]
repo = 'github/copilot.vim'
on_cmd = 'Copilot'
on_ft = ['python']
hook_source = '''
    let g:copilot_no_maps = v:true
    let g:copilot_hide_during_completion = 0
    imap <silent><expr> <C-g> copilot#Accept()
    imap <silent><expr> <C-n> copilot#Next()
    imap <silent><expr> <C-p> copilot#Previous()

    let g:copilot_filetypes = #{
        \   gitcommit: v:true,
        \   markdown: v:true,
        \   python: v:true,
        \   vim: v:true,
        \}
'''

[[plugins]]
repo = 'nvim-lua/plenary.nvim'

[[plugins]]
repo = 'CopilotC-Nvim/CopilotChat.nvim'
on_map = '<leader>cop'
depends = ['copilot.vim', 'plenary.nvim']
branch = 'main'
hook_add = '''
    nnoremap <leader>cop :CopilotChatOpen<CR>
'''
hook_post_source = '''
nnoremap <leader>cop :CopilotChatOpen<CR>
lua << EOF
require("CopilotChat").setup {
    debug = false,
    model = 'claude-3.5-sonnet',
    system_prompt = 'Your name is Copilot. You are an AI buddy of the user. You must assist the user not only for coding but also for writing, translating, summerizing the scentence, and proofreading.',
    prompts = {
        Explain = {
            prompt = "/COPILOT_EXPLAIN 上記のコードを日本語で説明してください",
            mapping = '<leader>cce',
            description = "バディにコードの説明をお願いする。",
        },
        Fix = {
            prompt = "/COPILOT_FIX このコードには問題があります。バグを修正したコードを表示してください。コメントは英語で、説明は日本語でしてください。",
            mapping = '<leader>ccf',
            description = "バディにコードの修正をお願いする。",
        },
        Optimize = {
            prompt = "/COPILOT_REFACTOR モダンでシンプルにすることを目標とし、選択したコードを最適化し、最適化を反映したコードを表示してください。コメントは英語で、説明は日本語でしてください。",
            mapping = '<leader>cco',
            description = "バディにコードの最適化をお願いする。",
        },
        FixDiagnostic = {
            prompt = "コードを診断結果に従って修正し、修正後のコードを表示してください。コメントは英語で、説明は日本語でしてください。",
            mapping = '<leader>ccd',
            description = "バディに静的解析結果に基づいたコードの最適化をお願いする。",
            selection= require('CopilotChat.select').diagnostics,
        },
        Commit = {
            prompt = "変更に対応するコミットメッセージを英語で記述して下さい。タイトルは最大50文字、メッセージは72文字で折り返し、メッセージ全体をgitcommit 言語のコードブロックでラップして下さい。メッセージ作成にあたり、commitizeがあればその規則に従って下さい。",
            mapping = '<leader>ccc',
            description = "バディにコードのコミットをお願いする。",
            selection= require('CopilotChat.select').gitdiff,
        },
        Jap2Eng = {
            prompt = "/USER_JAP2ENG 上記の文章を日本語から英語に翻訳して下さい。もし主語、動詞、目的語などが不明瞭で明確な翻訳ができない場合は、私に追加の質問をし不明瞭な点を解消してから翻訳に取り掛かってください。",
            mapping = '<leader>ccje',
            description = "バディに文章を日本語から英語への翻訳をお願いする。",
            window = {
                layout = 'float',
                width = 0.8,
                height = 0.8,
            },
        },
        Eng2Jap = {
            prompt = "/USER_ENG2JAP 上記の文章を英語から日本語に翻訳して下さい。",
            mapping = '<leader>ccej',
            description = "バディに文章を英語から日本語への翻訳をお願いする。",
            window = {
                layout = 'float',
                width = 0.8,
                height = 0.8,
            },
        },
        EngProofRead = {
            prompt = "/USER_ENGPROOFREAD 上記の文章を文法の誤りを直し、ネイティブから見て自然な英語になるように校閲、推敲して下さい。このとき、並び替えたり別の表現を用いれば不要になる箇所は取り去り、必要十分な文章のみで英文を構成してください。",
            mapping = '<leader>ccep',
            description = "バディに英文校閲をお願いする。",
            window = {
                layout = 'float',
                width = 0.8,
                height = 0.8,
            },
        },
    },
}
EOF
'''
#_____________________________________________________________ End Copilot

[[plugins]]
repo = 'vim-denops/denops.vim'
hook_source = '''
    let g:denops#server#deno_args = [
        \    '-q',
        \    '-A',
        \    '--unstable-kv',
        \]
'''

[[plugins]]
repo = 'skk-dev/dict'

[[plugins]]
repo = 'vim-skk/skkeleton'
depends = ['denops.vim', 'dict']
denops_wait = false
on_map = { ictn = '<Plug>(skkeleton-'}
hook_add = '''
    inoremap <C-j>  <Plug>(skkeleton-toggle)
    cnoremap <C-j>  <Plug>(skkeleton-toggle)
    tnoremap <C-j>  <Plug>(skkeleton-toggle)
    nnoremap <C-j> i<Plug>(skkeleton-enable)
'''
hook_source = '''
    call skkeleton#config(#{
        \   globalDictionaries    : ['~/.cache/dein/repos/github.com/skk-dev/dict/SKK-JISYO.L'->expand()],
        \   databasePath          : '~/.cache/skk/skkeleton.db'->expand(),
        \   completionRankFile    : '~/.skk/rank.json'->expand(),
        \   sources               : ['deno_kv', 'google_japanese_input'],
        \   registerConvertResult : v:true,
        \   eggLikeNewline        : v:true,
        \ })

    ""autocmd MyAutoCmd User skkeleton-enable-pre call s:skkeleton_pre()
    ""function! s:skkeleton_pre() abort
    ""    " Overwrite sources
    ""    let s:prev_buffer_config = ddc#custom#get_buffer()
    ""    call ddc#custom#patch_buffer({
    ""    \    'sources'      : ['around', 'skkeleton'],
    ""    \    'sourceOptions':{
    ""    \        '_' : {
    ""    \            'keywordPattern': '[ァ-ヮア-ンー]+',
    ""    \              },
    ""    \                    },
    ""    \})
    ""endfunction

    ""autocmd MyAutoCmd User skkeleton-disable-pre call s:skkeleton_post()
    ""function! s:skkeleton_post() abort
    ""    if 's:prev_buffer_config'->exists()
    ""        " Restore sources
    ""        call ddc#custom#set_buffer(s:prev_buffer_config)
    ""    endif
    ""endfunction

    call skkeleton#initialize()
'''

[[plugins]]
repo = 'delphinus/skkeleton_indicator.nvim'
on_source = 'skkeleton'
lua_source = '''
    require('skkeleton_indicator').setup{}
'''

[[plugins]]
repo = 'NI57721/vim-socrates'
on_map = { ni = '<Plug>(socrates-)' }
hook_add = '''
    nnoremap <silent> <leader>gr <Plug>socrates-greed
'''
hook_source = '''
    let g:socrates_smart_mode = v:false
'''

#_____________________________________________________________ Start ddc
[[plugins]]
repo = 'Shougo/ddc.vim'
on_event = 'InsertEnter'
depends = ['denops.vim']
hook_source = '''
    call ddc#custom#patch_global('ui', 'pum')
    call ddc#custom#patch_global('sources', [
    \                                        'vim-lsp',
    \                                        'ultisnips',
    \                                        'around',
    \                                        'buffer',
    \                                        'rg',
    \                                        'dictionary',
    \                                        'file',
    \                                        ])
    call ddc#custom#patch_global('sourceOptions', {
    \   '_'        : {
    \       'matchers'              : ['matcher_head'],
    \       'sorters'               : ['sorter_rank'],
    \       'converters'            : ['converter_remove_overlap'],
    \                },
    \  'vim-lsp'   : {
    \       'mark'                  : '[LSP]',
    \       'matchers'              : ['matcher_head'],
    \       'forceCompletionPattern': '\.|:|->|"\w+/*'
    \                },
    \  'ultisnips' : {
    \       'mark'                  : '[UltSnps]'
    \                },
    \  'around'    : {
    \       'mark'                  : '[Around]'
    \                },
    \  'buffer'    : {
    \       'mark'                  : '[Buf]'
    \                },
    \  'rg'    : {
    \       'mark'                  : '[ripgrep]'
    \                },
    \  'dictionary': {
    \       'mark'                  : '[Dict]'
    \                },
    \  'file'      : {
    \       'mark'                  : '[File]',
    \       'isVolatile'            : v:true,
    \       'forceCompletionPattern': '\S/\S*'
    \                },
    \  'nvim-obsidian': {
    \       'mark'                  : '[OBS]',
    \                },
    \  'nvim-obsidian-new': {
    \       'mark'                  : '[OBS+]',
    \                },
    \ })
    call ddc#custom#patch_global('sourceParams', {
    \  'dictionary': {
    \       'dictPaths'             : ['/usr/share/dict/american-english'],
    \       'smartCase'             : v:true,
    \       'showMenu'              : v:false,
    \                },
    \  'nvim-obsidian': #{
    \       dir: expand("$OBSIDIAN_PATH"),
    \   },
    \  'nvim-obsidian-new': #{
    \       dir: expand("$OBSIDIAN_PATH"),
    \   },
    \ })

    function! Obsidian() abort
        call ddc#custom#patch_buffer('sources', [
        /    'nvim-obsidian',
        /    'nvim-obsidian-new',
        /])
    endfunction
    autocmd BufRead,BufNewFile expand("$OBSIDIAN_PATH") .. "/**/*.md" call Obsidian()

    call ddc#enable()

    inoremap <silent><expr> <TAB>
        \ pum#visible() ? '<Cmd>call pum#map#insert_relative(+1)<CR>' :
        \ (col('.') <= 1 <Bar><Bar> getline('.')[col('.') - 2] =~# '\s') ?
        \'<TAB>' : ddc#map#manual_complete()
    inoremap <S-Tab> <Cmd>call pum#map#insert_relative(-1)<CR>
    inoremap <C-n>   <Cmd>call pum#map#insert_relative(+1)<CR>
    inoremap <C-p>   <Cmd>call pum#map#insert_relative(-1)<CR>
    inoremap <C-y>   <Cmd>call pum#map#confirm()<CR>
    inoremap <C-e>   <Cmd>call pum#map#cancel()<CR>

'''

[[plugins]]
repo = 'Shougo/pum.vim'
on_source = 'ddc.vim'

[[plugins]]
repo = 'ttak0422/ddc-source-nvim-obsidian'
on_source = 'ddc.vim'

[[plugins]]
repo = 'Shougo/ddc-ui-pum'
on_source = 'ddc.vim'
hook_add = '''
    call pum#set_option({
    \            'max_width': 50,
    \           'max_height': 10,
    \        'preview_width': 50,
    \       'preview_height': 10,
    \ })
'''
[[plugins]]
repo = 'Shougo/ddc-buffer'
on_source = 'ddc.vim'

[[plugins]]
repo = 'Shougo/ddc-rg'
on_source = 'ddc.vim'

[[plugins]]
repo = 'Shougo/ddc-around'
on_source = 'ddc.vim'

[[plugins]]
repo = 'Shougo/ddc-source-around'
on_source = 'ddc.vim'

[[plugins]]
repo = 'Shougo/ddc-matcher_head'
on_source = 'ddc.vim'

[[plugins]]
repo = 'Shougo/ddc-sorter_rank'
on_source = 'ddc.vim'

[[plugins]]
repo = 'Shougo/ddc-converter_remove_overlap'
on_source = 'ddc.vim'

[[plugins]]
repo = 'shun/ddc-source-vim-lsp'
on_source = 'ddc.vim'

[[plugins]]
repo = 'LumaKernel/ddc-file'
on_source = 'ddc.vim'

[[plugins]]
repo = 'matsui54/ddc-dictionary'
on_source = 'ddc.vim'

[[plugins]]
repo = 'matsui54/ddc-ultisnips'
on_source = 'ddc.vim'

[[plugins]]
repo = 'uga-rosa/ddc-source-vsnip'
on_source = 'ddc.vim'
depends = ['vim-vsnip', 'vim-vsnip-integ']

#_____________________________________________________________ End ddc

#_____________________________________________________________ Start treesitter
[[plugins]]
repo = 'nvim-treesitter/nvim-treesitter'
merged = '0'
on_event = 'BufRead'
hook_post_update = 'TSUpdate'
lua_source = '''
    require( 'nvim-treesitter.configs' ).setup {
        highlight = {enable = true},
        indent    = {enable = true},
    }
'''

[[plugins]]
repo = 'nvim-treesitter/playground'
depends = 'nvim-treesitter'
on_cmd = ['TSPlaygroundToggle']
#_____________________________________________________________ End treesitter

#_____________________________________________________________ Start LSP
[[plugins]]
repo = 'prabirshrestha/async.vim'
on_source = 'vim-lsp'

[[plugins]]
repo = 'prabirshrestha/asyncomplete.vim'
on_source = 'vim-lsp'

[[plugins]]
repo = 'prabirshrestha/asyncomplete-lsp.vim'
on_source = 'vim-lsp'

[[plugins]]
repo = 'mattn/vim-lsp-icons'
on_source = 'vim-lsp'

[[plugins]]
repo = 'hrsh7th/vim-vsnip'
on_source = 'vim-lsp'

[[plugins]]
repo = 'hrsh7th/vim-vsnip-integ'
on_source = 'vim-lsp'

[[plugins]]
repo = 'tsuyoshicho/vim-efm-langserver-settings'
deponds = 'vim-lsp'
on_source = 'vim-lsp'

[[plugins]]
repo = 'prabirshrestha/vim-lsp'
merged = '0'
on_event = 'BufRead'

[[plugins]]
repo = 'mattn/vim-lsp-settings'
on_source = 'vim-lsp'
hook_add = '''
    function! s:on_lsp_buffer_enabled() abort
        setlocal omnifunc=lsp#complete
        setlocal signcolumn=yes
        nmap <buffer> gd <plug>(lsp-definition)
        nmap <buffer> <F2> <plug>(lsp-rename)
        "inoremap <expr> <cr>pumvisible()? "\<c-y>\<cr>":"\<cr>"
    endfunction

    augroup lsp_install
        au!
        autocmd User lsp_buffer_enabled call s:on_lsp_buffer_enabled()
    augroup END
    command! LspDebug let lsp_log_verbose=1 | let lsp_log_file = expand('~/lsp.log')

    let g:lsp_diagnostics_enabled = 1
    let g:lsp_diagnostics_echo_cursor = 1
    let g:asyncomplete_auto_popup = 0
    let g:asyncomplete_auto_completeopt = 0
    let g:asyncomplete_popup_delay = 200
    let g:lsp_text_edit_enabled = 0

    " For efm-langserver
    let g:lsp_settings = {
    \   'efm-langserver': {
    \       'disabled': v:false,
    \       'allowlist': [
    \           'markdown',
    \           'tex'
    \       ],
    \   }
    \}

    let g:lsp_signs_warning = {'text': '⚠'}

    let g:lsp_log_file = ''
    if !has('nvim')
        let g:lsp_diagnostics_float_cursor = 1
    endif

    function! s:on_lsp_buffer_enabled() abort
        setlocal completeopt=menu
        setlocal omnifunc=lsp#complete
    endfunction

    augroup lsp_install
        au!
        au User lsp_buffer_enabled call s:on_lsp_buffer_enabled()
    augroup END
'''
#_____________________________________________________________ End LSP

[[plugins]]
repo = 'junegunn/vim-easy-align'
on_map = '<Plug>(EasyAlign)'
hook_add = '''
    xnoremap <silent>ga <Plug>(EasyAlign)
'''

[[plugins]]
repo = 'easymotion/vim-easymotion'
on_cmd = '<Plug>(easymotion-)'
hook_add = '''
    let g:EasyMotion_do_mapping = 0 "Disable default mappings
    let g:EasyMotion_smartcase = 1 "Turn on case insensitive feature
'''

#_____________________________________________________________ Start vim-quickrun
[[plugins]]
repo = 'Shougo/vimproc.vim'
build = 'make'
on_source = 'vim-quickrun'

[[plugins]]
repo = 'thinca/vim-quickrun'
on_cmd = '<F5>'
hook_add = '''
    nnoremap <silent> <F5> :QuickRun<CR>
'''
hook_source = '''
    " Kill the process by <Ctrl-C>
    function! s:sweep_and_message()
        call quickrun#sweep_sessions()
        echo "Killed"
        return ""
    endfunction
    nnoremap <expr><silent> <C-c> quickrun#is_running() ? <SID>sweep_and_message(): "\<C-c>"

    " Show an in progress animation
    let s:hook = {
    \   "name"         : "in_progress",
    \   "kind"         : "hook",
    \   "index_counter": 0,
    \   "config"       : {
    \       "enable": 0
    \}
    \}

    function! s:hook.on_read(session, context)
        let self.index_counter = -2
    endfunction

    function! s:hook.on_output(session, context)
        let self.index_counter += 1
        if self.index_counter < 0
            return
        endif
        let anime_list = [
       \   '⠋',
       \   '⠙',
       \   '⠹',
       \   '⠸',
       \   '⠼',
       \   '⠴',
       \   '⠦',
       \   '⠧',
       \   '⠇',
       \   '⠏',
       \]
        echo anime_list[ self.index_counter % len(anime_list)]
    endfunction

    call quickrun#module#register(s:hook, 1)
    unlet s:hook

    " General setting
    let g:quickrun_config = get(g:, 'quickrun_config', {})
    let g:quickrun_config._ = {
    \    'runner'                         : 'vimproc',
    \    'runner/vimproc/updatetime'      : 60,
    \    'outputter'                      : 'error',
    \    'outputter/error/success'        : 'buffer',
    \    'outputter/error/error'          : 'quickfix',
    \    'outputter/buffer/split'         : 'rightbelow 8sp',
    \    'outputter/buffer/close_on_empty': 1,
    \    'hook/in_progress/enable'        : 1,
    \}

    " For LaTeX
    let g:quickrun_config['tex'] = {
    \    'command'                : 'latexmk',
    \    'outputter'              : 'error',
    \    'outputter/error/success': 'quickfix',
    \    'outputter/error/error'  : 'buffer',
    \    'srcfile'                : expand("%"),
    \    'cmdopt'                 : '',
    \    'hook/sweep/files'       : [
    \        '%S:p:r.aux',
    \        '%S:p:r.bbl',
    \        '%S:p:r.blg',
    \        '%S:p:r.dvi',
    \        '%S:p:r.fdb_latexmk',
    \        '%S:p:r.fls',
    \        '%S:p:r.log',
    \        '%S:p:r.out',
    \    ],
    \    'exec'                   : '%c %o %a %s',
    \}
'''
#_____________________________________________________________ End vim-quickrun

[plugins.ftplugin]
tex_plaintex_latex = '''
    set shiftwidth=2

    autocmd MyAutoCmd FileType tex call <SID>TeXKeymap()
    autocmd MyAutoCmd FileType tex
        \ autocmd BufWritePre <buffer> call <SID>FixPunctuation()

    function! s:TeXKeymap() abort
        inoremap $ $$<LEFT>
        inoremap ` `'<LEFT>
        inoremap \mr<SPACE> \mathrm{}<LEFT>
    endfunction

    function! s:FixPunctuation() abort
        let l:pos = getpos('.')
        silent! execute ':%s/。/．/g'
        silent! execute ':%s/、/，/g'
        silent! execute ':%s/\\\@<!\s\+$//'
        setlocal modified
        call setpos('.', l:pos)
    endfunction

    ""function! s:myFolds()
    ""    let g:latex_fold_environ = ['frame']
    ""    call <SID>myFoldExpr(latex_fold_environ)
    ""endfunction

    ""function! s:myFoldExpr(latex_fold_environ)
    ""    let l:line = getline(v:lnum)
    ""    for env in l:latex_fold_environ
    ""        if match(l:line, '\\begin{' .env . '}') != -1
    ""            return 'a1'
    ""        elseif match(l:line, '\\end{' .env .'}') != -1
    ""            return 's1'
    ""        endif
    ""    endfor
    ""    return '='
    ""endfunction
'''

markdown = '''
    autocmd MyAutoCmd FileType markdown call s:MDKeymap()
    autocmd MyAutoCmd FileType markdown
        \ autocmd BufWritePre <buffer> call s:FixPunctuation()
    function! s:MDKeymap() abort
        inoremap $ $$<LEFT>
        inoremap \mr<SPACE> \mathrm{}<LEFT>
    endfunction
    function! s:FixPunctuation() abort
        let l:pos = getpos('.')
        silent! execute ':%s/。/./g'
        silent! execute ':%s/、/,/g'
        silent! execute ':%s/\\\@<!\s\+$//'
        setlocal modified
        call setpos('.', l:pos)
    endfunction
'''

toml = '''
    setl foldmethod=expr
    setl foldexpr=<SID>fold_expr(v:lnum)

    function! s:fold_expr(lnum) abort
        let line = getline(a:lnum)
        return line ==# '' || line[0:3] ==# '    '
    endfunction
'''

#_____________________________________________________________ Start snippets
[[plugins]]
repo = 'SirVer/ultisnips'
on_event = 'InsertEnter'
hook_add = '''
    let g:UltiSnipsExpandTrigger="<c-l>"
    let g:UltiSnipsJumpForwardTrigger="<c-n>"
    let g:UltiSnipsJumpBackwardTrigger="<c-b>"
    let g:UltiSnipsSnippetDirectories=['~/.config/nvim/mySnippets'->expand(), '~/.cache/dein/repos/github.com/honza/vim-snippets/UltiSnips'->expand()]
'''

[[plugins]]
repo = 'honza/vim-snippets'
on_source = 'ultisnips'

[[plugins]]
repo = 'hrsh7th/vim-vsnip-integ'

[[plugins]]
repo = 'hrsh7th/vim-vnisp'
#_____________________________________________________________ End snippets

#_____________________________________________________________ Start Obsidian
[[plugins]]
repo = 'epwalsh/obsidian.nvim'
on_ft = ['markdown']
depends = ['plenary.nvim', 'fzf-lua']
# on_event = ["BufReadPre" .. expand("$OBSIDIAN_PATH") .. "/**.md"]
lua_source = '''
vim.opt_local.conceallevel = 2
require("obsidian").setup{
    notes_subdir = "Output",
    log_level = vim.log.levels.DEBUG,
    disable_frontmatter = true,

    workspaces = {
        {
            name = "Obsidian_Vault",
            path = vim.fn.expand("$OBSIDIAN_PATH")
        },
    },
    daily_notes = {
        folder      = "Output",
        date_format = "%Y-%m-%d",
    },
    picker = {
        name = 'fzf-lua',
        new = "<C-x>",
        insert_link = "<C-l>"
    },
    completion = {
        nvim_cmp = false,
        min_chars = 2,
    },
}
'''
#_____________________________________________________________ End Obsidian

[[plugins]]
repo = 'mattn/vim-sonictemplate'
on_cmd = [ 'Template' ]
hook_source = '''
    let g:sonictemplate_vim_template_dir = expand( '~/.config/nvim/templates' ) '''

